{
  "gitSyncId": "681837a3d01125478949ff12_794fdf4c-482c-470b-b336-0141cd60d544",
  "id": "PYCM_Query1",
  "pluginId": "mysql-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "SELECT \n    MAX(`maya_raw_stock1sum`.`expdate`) AS `expdate`,\n    `maya_raw_stock1sum`.`saka` AS `saka`,\n    `maya_raw_stock1sum`.`pcode` AS `pcode`,\n    `maya_raw_stock1sum`.`modelcode` AS `modelcode`,\n    `maya_raw_stock1sum`.`modelname` AS `modelname`,\n    `maya_raw_stock1sum`.`eng` AS `eng`,\n    `maya_raw_stock1sum`.`pic` AS `pic`,\n    `maya_raw_stock1sum`.`pH` AS `pH`,\n    `maya_raw_stock1sum`.`use` AS `use`,\n    `maya_raw_stock1sum`.`solvent` AS `solvent`,\n    `maya_raw_stock1sum`.`properties` AS `properties`,\n    `maya_raw_stock1sum`.`method` AS `method`,\n    `maya_raw_stock1sum`.`use_p` AS `use_p`,\n    `maya_raw_stock1sum`.`for` AS `for`,\n    `maya_raw_stock1sum`.`cost_u` AS `cost_u`,\n    `maya_raw_stock1sum`.`cost` AS `cost`,\n\n    -- ปริมาณรวม\n    SUM(`maya_raw_stock1sum`.`sin`) AS `sin`,\n    SUM(`maya_raw_stock1sum`.`sout`) AS `sout`,\n    SUM(`maya_raw_stock1sum`.`total`) AS `total`,\n\n    -- คงเหลือแต่ละคลัง\n    COALESCE(SUM(CASE WHEN `saka` = 'พันท้าย' THEN `total` END), 0) AS `sk1`,\n    COALESCE(SUM(CASE WHEN `saka` = 'พระราม2' THEN `total` END), 0) AS `sk2`,\n    COALESCE(SUM(CASE WHEN `saka` = 'บางเลน17' THEN `total` END), 0) AS `sk3`\n\nFROM \n    `maya_raw_stock1sum`\n\nWHERE\n    (\n      `pcode`      LIKE CONCAT('%', {{Input3.text}}, '%')\n      OR `modelcode` LIKE CONCAT('%', {{Input3.text}}, '%')\n      OR `modelname` LIKE CONCAT('%', {{Input3.text}}, '%')\n      OR `eng`       LIKE CONCAT('%', {{Input3.text}}, '%')\n    )\n\nGROUP BY \n    `maya_raw_stock1sum`.`pcode`\n",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "2020",
      "isAutoGenerated": false,
      "name": "2020",
      "pluginId": "mysql-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "executeOnLoad": false,
    "name": "Query1",
    "pageId": "PYCM",
    "userSetOnLoad": true
  }
}